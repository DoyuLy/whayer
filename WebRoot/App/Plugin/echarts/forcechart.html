<!DOCTYPE html>
<html>
<head>
    <title>force.html</title>
    <meta name="content-type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta charset="utf-8">
</head>
<body style="width: 100%; height: 100%;">
    <script type="text/javascript" src="../jquery/jquery-1.12.2.min.js"></script>
    <script type="text/javascript" src="echarts.js"></script>

    <style>
        html {
            width: 100%;
            height: 100%;
        }
    </style>
    <div id="main" style="width: 100%; height: 100%; padding-left: 0"></div>
    <script type="text/javascript">
        $(function () {
            var myChart = echarts.init(document.getElementById('main'));
            myChart.showLoading();
            var option
            $.getJSON('./force.json',
             function (jsondata) {
                 myChart.hideLoading();
                 option = {
                     legend: {
                         data: jsondata.legend//['HTMLElement', 'WebGL', 'SVG', 'CSS', 'Other']
                     },
                     toolbox: {
                         show: true,
                         feature: {
                             dataView: { show: true, readOnly: true },
                             restore: { show: true },
                             saveAsImage: { show: true },
                             myTool1: {
                                 show: true,
                                 title: '圆形关系',
                                 icon: 'path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891',
                                 onclick: function () {
                                     updateLayout("circular");
                                 }
                             },
                             myTool2: {
                                 show: true,
                                 title: '力导向关系',
                                 icon: 'image://./imgs/1.png',
                                 onclick: function () {
                                     updateLayout("force");
                                 }
                             }
                         }
                     },
                     series: [{
                         type: 'graph',
                         layout: 'force',
                         animation: false,
                         label: {
                             normal: {
                                 position: 'right',
                                 formatter: '{b}'
                             }
                         },
                         draggable: true,
                         data: jsondata.nodes.map(function (node, idx) {
                             
                             node.id = idx;
                             return node;
                         }),
                         symbolSize:function(value){return value*5+20},
                         roam:true,
                         gravity:10,
                         categories: jsondata.categories,
                         force: {
                             // initLayout: 'circular'
                             // gravity: 0
                             // repulsion: 20,
                             edgeLength: 100,
                             repulsion: 200
                         },
                         edges: jsondata.links
                     }]
                 };

                 myChart.setOption(option);
             });
            function updateLayout(layout) {
                if (option) {
                    if (layout != "circular" && layout != "force") { return; }
                    option.series[0].layout = layout;
                    option.series[0].draggable = (layout === "force");

                    myChart.setOption(option);
                }
  
            }
        });

    </script>
</body>
</html>

